<%=render 'shared/navigation'%>

<h1 class ="text">Hi, <%= current_user.username %>!  Where do you feel like lunching today?</h1>
<button type="button" class="btn btn-secondary" onclick="DisplayMap()">Spots</button>
<div class="containerr" id="containerr" >


  <div id="allspots">
<% @spots.each do |spot| %>

      <div id="card-total" class="card-total">

          <div class="card-body">
            <iframe
            width="100%"
            height="100%"
            frameborder="0" style="border:0"
            src="https://www.google.com/maps/embed/v1/place?key=<%=ENV['google_maps_api_key']%>
              &q=<%="#{spot.spot}"%>+<%="#{spot.location}"%>" allowfullscreen>
            </iframe>

            <div class="spot-title-time">
              <p><small><b>Spot place : </b><%=spot.spot%></small></p>
            </div>

            <div class="fontsize">
              <p><b>Date : </b><%= spot.datestring %></p>
            </div>

            <div class="fontsize">
              <p><b>Time : </b><%= spot.time_start %> - <%= spot.time_end %></p>
            </div>
            <div class="fontsize">
              <p><b>Location : </b><%= spot.location %></p>


              <% @users.each do |user| %>
              <%= link_to profile_path(user.id) do %>
                <% if user.id == spot.user_id %>
                  <% if user.avatar.attached? %>
                    <%= image_tag user.avatar.variant(resize: "50x50!"), class: "tar rounded-circle" %>
                  <% else %>
                    <%= image_tag gravatar_image_url(user.email, size: 75), height: 50, width: 50, class: "tar rounded-circle" %>
                  <% end %>
                <% end %>
              <% end %>
               <% end %>

            </div>
            <div class="fontsize" id="redirect-to-spot">
              <p><%= link_to "Click here for more details", spot_path(spot)%></p>
            </div>
          </div>
      </div>
 <% end %>
 </div>
</div>
<div id="mapsrender" style="display: none">
  <%= render 'spots/partials/map_view' %>
</div>

<style>
  /* Always set the map height explicitly to define the size of the div
   * element that contains the map. */
  #mapsrender {
    height: 90%;
  }
  }
  .containerr{
    margin: 0 auto;
    width:100%;
    height: 100;
  }
  #redirect-to-spot
  {
    text-align:center
  }
  .fontsize
  {
    font-size:12px;
  }
.text {
  text-align: center;
}
a.spot-title {
  font-size: 16px;
  text-decoration: none;
  color: inherit;
  font-weight: bold;
  font-size: 20px;
}

.spot-title-time {
  display: flex;
  font-size: 16px;
}

.card-total {
  border-style: solid;
  border-color: #28a745;
  border-radius: 25px;
  width: 30%;
  margin: 10px;
  background-color: #ecd7d6;
  float: left;
}

.card-body {
  padding: 10px;
}

</style>
