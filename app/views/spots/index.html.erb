
<h1 class ="text">Hi, <%= current_user.username %>!  Where do you feel like lunching today?</h1>

<div class="container">
  <% @spots.each do |spot| %>

      <div class="card-total">
        <%= link_to spot_path(spot) do %>
        <% end %>

          <div class="card-body">
            <iframe
            width="100%"
            height="100%"
            frameborder="0" style="border:0"
            src="https://www.google.com/maps/embed/v1/place?key=<%=ENV['google_maps_api_key']%>
              &q=<%="#{spot.spot}"%>+<%="#{spot.location}"%>" allowfullscreen>
            </iframe>

            <div class="spot-followers"

            <% @users.each do |user| %>
              <% if user.id == spot.user_id %>
                <%= link_to profile_path(user.id) do %>
                  <% if user.avatar.attached? %>
                    <%= image_tag user.avatar.variant(resize: "20x20!"), class: "tar rounded-circle" %>
                  <% else %>
                    <%= image_tag gravatar_image_url(user.email, size: 75), height: 50, width: 50, class: "tar rounded-circle" %>
                  <% end %>
                <% end %>
              <% end %>
            <% end %>

              <% spot.followers.each do |follower| %>
                <%= link_to profile_path(follower.id) do %>
                  <% if follower.avatar.attached? %>
                    <%= image_tag follower.avatar.variant(resize: "20x20!"), class: "tar rounded-circle" %>
                  <% else %>
                    <%= image_tag gravatar_image_url(follower.email, size: 75), height: 50, width: 50, class: "tar rounded-circle" %>
                  <% end %>
                <% end %>
              <% end %>

            </div>

            <div class="spot-title-time">
              <p><small><b>Spot place : </b><%=spot.spot%></small></p>
            </div>
            <div class="fontsize">
              <p><b>Time : </b><%= spot.time_start %> - <%= spot.time_end %></p>
            </div>
            <div class="fontsize">
              <p><b>Location : </b><%= spot.location %></p>
            </div>
            <div class="fontsize" id="redirect-to-spot">
              <p><%= link_to "Click here for more details", spot_path(spot)%></p>
            </div>

          </div>
      </div>
  <% end %>
</div>

<style>
  #redirect-to-spot
  {
    text-align:center
    
  }
  .fontsize
  {
    font-size:12px;
  }
.text {
  text-align: center;
}
a.spot-title {
  font-size: 16px;
  text-decoration: none;
  color: inherit;
  font-weight: bold;
  font-size: 20px;
}

.spot-title-time {
  display: flex;
  font-size: 16px;
}

p.spot-time {
  text-align: right;
  font-size: 15px;
}
.card-total {
  border-style: solid;
  border-color: grey;
  border-radius: 25px;
  width: 25%;
  margin: 10px;
}
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.card-body {
  padding: 10px;
}

.card-img-top {
  border-top-left-radius: 20px;
  border-top-right-radius: 20px;
}

.spot-followers {
  display: flex;
  flex-direction: row;
  padding-top: 10px;
}

.spot-user-options {
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  padding-top: 10px;
}

.spot-user-option {
  padding: 5px;
}
</style>
