<%=render 'shared/navigation'%>
<%= javascript_include_tag 'spots' %>
<%= javascript_include_tag 'home' %>
<script src="https://maps.googleapis.com/maps/api/js?key=<%=ENV['google_maps_api_key']%>&libraries=places"></script>

<div id="form-group">
  <div class="form text-color">
    <h1>Add a Lunch spot!</h1>

  <%= form_for :spot, url: spots_path do |f| %>
      <% if @spot.errors.any? %>
        <% @spot.errors.full_messages.each do |msg| %>
          <div class="alert alert-danger"><%= msg %></div>
        <% end %>
      <% end %>

    <iframe
      id="map"
      width="100%"
      height="100%"
      frameborder="0" style="border:0"
      src="https://www.google.com/maps/embed/v1/search?key=<%=ENV['google_maps_api_key']%>
      &q=restaurants+near+me" allowfullscreen>
    </iframe>

    <script>
     function init() {
      var input = document.getElementById('location1');
      var autocomplete = new google.maps.places.Autocomplete(input);
      var map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: 50.869754630095834, lng: 4.353812903165801},
        zoom: 12
        });
      }
      google.maps.event.addDomListener(window, 'load', init);
    </script>

    <p>
      <%= f.label :spot %><br>
      <%= f.text_field(:spot, {:class => 'form-control'}) %>
    </p>

    <p>
      <%= f.label :date %><br>
      <%= f.text_field(:datestring, :autocomplete => :off, :id => "datepicker", :class => 'form-control') %>
    </p>

    <p>
      <%= f.label :time_start %><br>
      <%= f.time_select(:time_start, autocomplete: 'off', class: "form-control" ) %>
    </p>

    <p>
      <%= f.label :time_end %><br>
      <%= f.time_select(:time_end, autocomplete: 'off', :class => 'form-control') %>
    </p>

    <p>
      <%= f.label :location %><br>
      <%= f.text_field(:location, id: "location1", :class => 'form-control', :placeholder => "") %>
    </p>

    <p>
      <%= f.label :info %><br>
      <%= f.text_area(:info, {:class => 'form-control'}) %>
    </p>

    <p>
      <%= f.submit({:class => 'btn btn-primary'}) %>
    </p>
  <% end %>

  </div>
</div>
